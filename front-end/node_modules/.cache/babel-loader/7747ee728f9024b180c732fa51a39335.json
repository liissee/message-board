{"ast":null,"code":"import { createSlice } from '@reduxjs/toolkit';\nimport { ui } from 'reducers/ui';\nconst initialState = {\n  users: [],\n  // userName: localStorage.userName || \"\",\n  // accessToken: localStorage.accessToken || \"\",\n  // userId: localStorage.userId || \"\"\n  accessToken: localStorage.getItem('accessToken'),\n  userName: localStorage.getItem('userName'),\n  userId: localStorage.getItem('userId')\n};\nexport const users = createSlice({\n  name: 'user',\n  initialState,\n  reducers: {\n    setAccessToken: (state, action) => {\n      state.accessToken = action.payload;\n      window.localStorage.setItem('accessToken', action.payload);\n    },\n    removeAccessToken: (state, action) => {\n      state.accessToken = \"\";\n      window.localStorage.removeItem('accessToken', action.payload);\n    },\n    setUserId: (state, action) => {\n      state.userId = action.payload;\n      window.localStorage.setItem('userId', action.payload);\n    },\n    removeUserId: (state, action) => {\n      state.userId = \"\";\n      window.localStorage.removeItem('userId', action.payload);\n    },\n    setUserName: (state, action) => {\n      state.userName = action.payload;\n      window.localStorage.setItem('userName', action.payload);\n    },\n    removeUserName: (state, action) => {\n      state.userName = \"\";\n      window.localStorage.removeItem('userName', action.payload);\n    }\n  }\n});\nexport const fetchUser = ({\n  userName,\n  password\n}) => {\n  return dispatch => {\n    fetch(\"http://localhost:8080/sessions\", {\n      method: 'POST',\n      body: JSON.stringify({\n        userName,\n        password\n      }),\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(res => {\n      if (!res.ok) {\n        throw new Error(\"Your user name and/or password was incorrect\");\n      } else {\n        return res.json();\n      }\n    }).then(({\n      accessToken,\n      userId,\n      userName\n    }) => {\n      if (accessToken && userId && userName) {\n        dispatch(users.actions.setAccessToken(accessToken));\n        dispatch(users.actions.setUserName(userName));\n        dispatch(users.actions.setUserId(userId));\n        dispatch(ui.actions.setLoginFailed(false));\n      }\n    }).catch(err => dispatch(ui.actions.setLoginFailed(true)));\n  };\n};","map":{"version":3,"sources":["/Users/lindaisell/Desktop/technigo-bootcamp/message-board/front-end/src/reducers/users.js"],"names":["createSlice","ui","initialState","users","accessToken","localStorage","getItem","userName","userId","name","reducers","setAccessToken","state","action","payload","window","setItem","removeAccessToken","removeItem","setUserId","removeUserId","setUserName","removeUserName","fetchUser","password","dispatch","fetch","method","body","JSON","stringify","headers","then","res","ok","Error","json","actions","setLoginFailed","catch","err"],"mappings":"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","sourcesContent":["import { createSlice } from '@reduxjs/toolkit'\nimport { ui } from 'reducers/ui'\n\n\nconst initialState = {\n  users: [],\n  // userName: localStorage.userName || \"\",\n  // accessToken: localStorage.accessToken || \"\",\n  // userId: localStorage.userId || \"\"\n  accessToken: localStorage.getItem('accessToken'),\n  userName: localStorage.getItem('userName'),\n  userId: localStorage.getItem('userId')\n\n}\n\n\nexport const users = createSlice({\n  name: 'user',\n  initialState,\n  reducers: {\n    setAccessToken: (state, action) => {\n      state.accessToken = action.payload\n      window.localStorage.setItem('accessToken', action.payload)\n    },\n    removeAccessToken: (state, action) => {\n      state.accessToken = \"\"\n      window.localStorage.removeItem('accessToken', action.payload)\n    },\n    setUserId: (state, action) => {\n      state.userId = action.payload\n      window.localStorage.setItem('userId', action.payload)\n    },\n    removeUserId: (state, action) => {\n      state.userId = \"\"\n      window.localStorage.removeItem('userId', action.payload)\n    },\n    setUserName: (state, action) => {\n      state.userName = action.payload\n      window.localStorage.setItem('userName', action.payload)\n    },\n    removeUserName: (state, action) => {\n      state.userName = \"\"\n      window.localStorage.removeItem('userName', action.payload)\n    }\n  }\n})\n\n\n\nexport const fetchUser = ({ userName, password }) => {\n  return dispatch => {\n    fetch(\"http://localhost:8080/sessions\", {\n      method: 'POST',\n      body: JSON.stringify({ userName, password }),\n      headers: { 'Content-Type': 'application/json' }\n    })\n      .then(res => {\n        if (!res.ok) {\n          throw new Error(\"Your user name and/or password was incorrect\")\n        } else {\n          return res.json();\n        }\n      })\n      .then(({ accessToken, userId, userName }) => {\n        if (accessToken && userId && userName) {\n          dispatch(users.actions.setAccessToken(accessToken))\n          dispatch(users.actions.setUserName(userName))\n          dispatch(users.actions.setUserId(userId))\n          dispatch(ui.actions.setLoginFailed(false))\n        }\n\n      })\n      .catch(err => dispatch(ui.actions.setLoginFailed(true)))\n  }\n}\n"]},"metadata":{},"sourceType":"module"}