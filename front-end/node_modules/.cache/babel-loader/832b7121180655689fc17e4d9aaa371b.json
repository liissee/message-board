{"ast":null,"code":"import { createSlice } from '@reduxjs/toolkit';\nimport { ui } from 'reducers/ui';\nconst initialState = {\n  users: [],\n  userName: localStorage.userName || \"\",\n  accessToken: localStorage.accessToken || \"\",\n  userId: localStorage.userId || \"\"\n};\nexport const users = createSlice({\n  name: 'user',\n  initialState,\n  reducers: {\n    setAccessToken: (state, action) => {\n      state.accessToken = action.payload;\n      localStorage.setItem('accessToken', action.payload);\n    },\n    removeAccessToken: (state, action) => {\n      state.accessToken = \"\";\n      localStorage.removeItem('accessToken', action.payload);\n    },\n    setUserId: (state, action) => {\n      state.userId = action.payload;\n      localStorage.setItem('userId', action.payload);\n    },\n    removeUserId: (state, action) => {\n      state.userId = \"\";\n      localStorage.removeItem('userId', action.payload);\n    },\n    setUserName: (state, action) => {\n      state.userName = action.payload;\n      localStorage.setItem('userName', action.payload);\n    },\n    removeUserName: (state, action) => {\n      state.userName = \"\";\n      localStorage.removeItem('userName', action.payload);\n    }\n  }\n});\nexport const fetchUser = ({\n  userName,\n  password\n}) => {\n  return dispatch => {\n    fetch(\"http://localhost:8080/sessions\", {\n      method: 'POST',\n      body: JSON.stringify({\n        userName,\n        password\n      }),\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(res => {\n      if (!res.ok) {\n        throw new Error(\"Your user name and/or password was incorrect\");\n      } else {\n        return res.json();\n      }\n    }).then(({\n      accessToken,\n      userId,\n      userName\n    }) => {\n      console.log(accessToken);\n\n      if (accessToken && userId && userName) {\n        dispatch(users.actions.setAccessToken(accessToken));\n        dispatch(users.actions.setUserName(userName));\n        dispatch(users.actions.setUserId(userId));\n        dispatch(ui.actions.setLoginFailed(false));\n      }\n    }).catch(err => dispatch(ui.actions.setLoginFailed(true)));\n  };\n};","map":{"version":3,"sources":["/Users/lindaisell/Desktop/technigo-bootcamp/message-board/front-end/src/reducers/users.js"],"names":["createSlice","ui","initialState","users","userName","localStorage","accessToken","userId","name","reducers","setAccessToken","state","action","payload","setItem","removeAccessToken","removeItem","setUserId","removeUserId","setUserName","removeUserName","fetchUser","password","dispatch","fetch","method","body","JSON","stringify","headers","then","res","ok","Error","json","console","log","actions","setLoginFailed","catch","err"],"mappings":"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","sourcesContent":["import { createSlice } from '@reduxjs/toolkit'\nimport { ui } from 'reducers/ui'\n\n\nconst initialState = {\n  users: [],\n  userName: localStorage.userName || \"\",\n  accessToken: localStorage.accessToken || \"\",\n  userId: localStorage.userId || \"\"\n}\n\n\nexport const users = createSlice({\n  name: 'user',\n  initialState,\n  reducers: {\n    setAccessToken: (state, action) => {\n      state.accessToken = action.payload\n      localStorage.setItem('accessToken', action.payload)\n    },\n    removeAccessToken: (state, action) => {\n      state.accessToken = \"\"\n      localStorage.removeItem('accessToken', action.payload)\n    },\n    setUserId: (state, action) => {\n      state.userId = action.payload\n      localStorage.setItem('userId', action.payload)\n    },\n    removeUserId: (state, action) => {\n      state.userId = \"\"\n      localStorage.removeItem('userId', action.payload)\n    },\n    setUserName: (state, action) => {\n      state.userName = action.payload\n      localStorage.setItem('userName', action.payload)\n    },\n    removeUserName: (state, action) => {\n      state.userName = \"\"\n      localStorage.removeItem('userName', action.payload)\n    }\n  }\n})\n\n\n\nexport const fetchUser = ({ userName, password }) => {\n  return dispatch => {\n    fetch(\"http://localhost:8080/sessions\", {\n      method: 'POST',\n      body: JSON.stringify({ userName, password }),\n      headers: { 'Content-Type': 'application/json' }\n    })\n      .then(res => {\n        if (!res.ok) {\n          throw new Error(\"Your user name and/or password was incorrect\")\n        } else {\n          return res.json();\n        }\n      })\n      .then(({ accessToken, userId, userName }) => {\n        console.log(accessToken)\n        if (accessToken && userId && userName) {\n          dispatch(users.actions.setAccessToken(accessToken))\n          dispatch(users.actions.setUserName(userName))\n          dispatch(users.actions.setUserId(userId))\n          dispatch(ui.actions.setLoginFailed(false))\n        }\n\n      })\n      .catch(err => dispatch(ui.actions.setLoginFailed(true)))\n  }\n}\n"]},"metadata":{},"sourceType":"module"}