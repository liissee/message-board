{"ast":null,"code":"import { createSlice } from '@reduxjs/toolkit';\nimport { ui } from 'reducers/ui';\nconst initialState = {\n  users: [],\n  userName: localStorage.userName || \"\",\n  accessToken: localStorage.accessToken || \"\",\n  userId: localStorage.userId || \"\"\n};\nexport const users = createSlice({\n  name: 'user',\n  initialState,\n  reducers: {\n    setAccessToken: (state, action) => {\n      state.accessToken = action.payload;\n      window.localStorage.setItem('accessToken', action.payload);\n    },\n    removeAccessToken: (state, action) => {\n      state.accessToken = \"\";\n      window.localStorage.removeItem('accessToken', action.payload);\n    },\n    setUserId: (state, action) => {\n      state.userId = action.payload;\n      window.localStorage.setItem('userId', action.payload);\n    },\n    removeUserId: (state, action) => {\n      state.userId = \"\";\n      window.localStorage.removeItem('userId', action.payload);\n    },\n    setUserName: (state, action) => {\n      state.userName = action.payload;\n      window.localStorage.setItem('userName', action.payload);\n    },\n    removeUserName: (state, action) => {\n      state.userName = \"\";\n      window.localStorage.removeItem('userName', action.payload);\n    },\n    setUser: (state, action) => {\n      state.users = action.payload;\n    }\n  }\n});\nexport const fetchUser = ({\n  userName,\n  password\n}) => {\n  return dispatch => {\n    fetch(\"http://localhost:8080/sessions\", {\n      method: 'POST',\n      body: JSON.stringify({\n        userName,\n        password\n      }),\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(res => {\n      if (!res.ok) {\n        throw new Error(\"Your e-mail and/or password was incorrect\");\n      } else {\n        return res.json();\n      }\n    }).then(({\n      accessToken,\n      userId,\n      userName\n    }) => {\n      if (accessToken && userId && userName) {\n        dispatch(users.actions.setAccessToken(accessToken));\n        dispatch(users.actions.setUserName(userName));\n        dispatch(users.actions.setUserId(userId));\n        dispatch(ui.actions.setLoginFailed(false));\n      }\n    }).catch(err => dispatch(ui.actions.setLoginFailed(true)));\n  };\n};\nexport const createUser = ({\n  userName,\n  password\n}) => {\n  return dispatch => {\n    fetch(\"http://localhost:8080/users\", {\n      method: 'POST',\n      body: JSON.stringify({\n        userName,\n        password\n      }),\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(res => {\n      if (!res.ok) {\n        throw new Error(\"Your e-mail and/or password was incorrect\");\n      } else {\n        return res.json();\n      }\n    }).then(({\n      accessToken,\n      userId,\n      name\n    }) => {\n      if (accessToken && userId && name) {\n        dispatch(users.actions.setAccessToken(accessToken));\n        dispatch(users.actions.setUserId(userId));\n        dispatch(ui.actions.setLoginFailed(false));\n      }\n    }).catch(err => dispatch(ui.actions.setLoginFailed(true)));\n  };\n}; // const handleSubmit = event => {\n//   event.preventDefault();\n//   fetch(url, {\n//     method: \"POST\",\n//     body: JSON.stringify({ name, password }),\n//     headers: { \"Content-Type\": \"application/json\" }\n//   })\n//     .then(res => {\n//       if (res.status !== 201) {\n//         return (\n//           res.json().then(json => console.log(json.message)), setFailure(true)\n//         )\n//       } else {\n//         setRegistred(true)\n//         setTimeout(reDirect, 2000);\n//       }\n//     })\n//     .catch(err => console.log(\"Error:\", err))\n// }","map":{"version":3,"sources":["/Users/lindaisell/Desktop/technigo-bootcamp/message-board/front-end/src/reducers/users.js"],"names":["createSlice","ui","initialState","users","userName","localStorage","accessToken","userId","name","reducers","setAccessToken","state","action","payload","window","setItem","removeAccessToken","removeItem","setUserId","removeUserId","setUserName","removeUserName","setUser","fetchUser","password","dispatch","fetch","method","body","JSON","stringify","headers","then","res","ok","Error","json","actions","setLoginFailed","catch","err","createUser"],"mappings":"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","sourcesContent":["import { createSlice } from '@reduxjs/toolkit'\nimport { ui } from 'reducers/ui'\n\nconst initialState = {\n  users: [],\n  userName: localStorage.userName || \"\",\n  accessToken: localStorage.accessToken || \"\",\n  userId: localStorage.userId || \"\"\n}\n\n\nexport const users = createSlice({\n  name: 'user',\n  initialState,\n  reducers: {\n    setAccessToken: (state, action) => {\n      state.accessToken = action.payload\n      window.localStorage.setItem('accessToken', action.payload)\n    },\n    removeAccessToken: (state, action) => {\n      state.accessToken = \"\"\n      window.localStorage.removeItem('accessToken', action.payload)\n    },\n    setUserId: (state, action) => {\n      state.userId = action.payload\n      window.localStorage.setItem('userId', action.payload)\n    },\n    removeUserId: (state, action) => {\n      state.userId = \"\"\n      window.localStorage.removeItem('userId', action.payload)\n    },\n    setUserName: (state, action) => {\n      state.userName = action.payload\n      window.localStorage.setItem('userName', action.payload)\n    },\n    removeUserName: (state, action) => {\n      state.userName = \"\"\n      window.localStorage.removeItem('userName', action.payload)\n    },\n    setUser: (state, action) => {\n      state.users = action.payload\n    }\n  }\n})\n\n\nexport const fetchUser = ({ userName, password }) => {\n  return dispatch => {\n    fetch(\"http://localhost:8080/sessions\", {\n      method: 'POST',\n      body: JSON.stringify({ userName, password }),\n      headers: { 'Content-Type': 'application/json' }\n    })\n      .then(res => {\n        if (!res.ok) {\n          throw new Error(\"Your e-mail and/or password was incorrect\")\n        } else {\n          return res.json();\n        }\n      })\n      .then(({ accessToken, userId, userName }) => {\n        if (accessToken && userId && userName) {\n          dispatch(users.actions.setAccessToken(accessToken))\n          dispatch(users.actions.setUserName(userName))\n          dispatch(users.actions.setUserId(userId))\n          dispatch(ui.actions.setLoginFailed(false))\n        }\n\n      })\n      .catch(err => dispatch(ui.actions.setLoginFailed(true)))\n\n  }\n}\n\nexport const createUser = ({ userName, password }) => {\n  return dispatch => {\n    fetch(\"http://localhost:8080/users\", {\n      method: 'POST',\n      body: JSON.stringify({ userName, password }),\n      headers: { 'Content-Type': 'application/json' }\n    })\n      .then(res => {\n        if (!res.ok) {\n          throw new Error(\"Your e-mail and/or password was incorrect\")\n        } else {\n          return res.json();\n        }\n      })\n      .then(({ accessToken, userId, name }) => {\n        if (accessToken && userId && name) {\n          dispatch(users.actions.setAccessToken(accessToken))\n          dispatch(users.actions.setUserId(userId))\n          dispatch(ui.actions.setLoginFailed(false))\n        }\n\n      })\n      .catch(err => dispatch(ui.actions.setLoginFailed(true)))\n  }\n}\n\n// const handleSubmit = event => {\n//   event.preventDefault();\n//   fetch(url, {\n//     method: \"POST\",\n//     body: JSON.stringify({ name, password }),\n//     headers: { \"Content-Type\": \"application/json\" }\n//   })\n//     .then(res => {\n//       if (res.status !== 201) {\n//         return (\n//           res.json().then(json => console.log(json.message)), setFailure(true)\n//         )\n//       } else {\n//         setRegistred(true)\n//         setTimeout(reDirect, 2000);\n//       }\n//     })\n//     .catch(err => console.log(\"Error:\", err))\n// }\n"]},"metadata":{},"sourceType":"module"}